{% extends "base.html" %}
{% block style %}
<style>
	div.wrap {
		text-align: center;
		padding-top: 50px;
	}
	div.sect_wrap {
		width: 750px;
		margin: 0px auto 50px;
	}
	.sect_title {
		float: left;
		font-size: 20px;
		font-weight: bold;
	}
	.sect_content {
		margin: 0px auto;
		overflow-y: scroll;
		font-size: 15px;
		width: 750px;
		height: 300px;
	}
	div.basic_info h3 {
		font-size: 20px;
	}
	
</style>
{% endblock %}
{% block content %}
<div class="wrap">
	<h2>发布详情</h2>
	<div class="basic_info">
		<h3>发布者: {{record.user.username}}</h3>
		<h3>发布类型: {{record.deploy_item.deploy_type}}</h3>
		<h3>上传文件名: </h3>
		<h3>{{record.deploy_item.file_name}}</h3>
		{% if record.deploy_item.patch_group %}
		<h3>所属补丁组：{{record.deploy_item.patch_group.name}}</h3>
		{% endif%}
	</div>
	<div class="sect_wrap">
		<div class="sect_title">
			<label>readme</label>
		</div>
		<br/>
		<textarea readonly="readonly" class="sect_content">{{readme}}</textarea>
	</div>
	
	<div class="sect_wrap">
		<div class="sect_title">
			<label>发布文件列表</label>
		</div>
		<br/>
		<textarea readonly="readonly" class="sect_content">{{file_list_content}}</textarea>
	</div>
	
	{% if record.is_conflict_with_others and conflict_detail %}
	<div class="sect_wrap">
		<div class="sect_title" style="float:none; text-align: left; ">
			<label>文件冲突详情</label>
		</div>
		<div>
			<table id="conflict_tbl" border="1" cellspacing="0">
				<tr>
					<th width="40">ID</th>
					<th width="350">文件名</th>
					<th width="60">文件类型</th>
					<th width="150">冲突组名</th>
					<th width="80">冲突组状态</th>
				</tr>
				{% for conflict_info in conflict_detail.conflict_infos.all %}
				<tr>
					<td>{{conflict_info.id}}</td>
					<td>{{conflict_info.conflict_patch_file.file_path}}</td>
					<td>{{conflict_info.conflict_patch_file.file_type}}</td>
					<td>{{conflict_info.conflict_patch_group.name}}</td>
					<td>{{conflict_info.conflict_patch_group.status}}</td>
				</tr>
				{% endfor %}
			</table>
		</div>
	</div>
	{% endif %}
	
	<div class="sect_wrap"  style="display:none;">
		<div class="sect_title">
			<label>发布日志</label>
		</div>
		<br/>
		<textarea readonly="readonly" class="sect_content"></textarea>
	</div>

</div>
{% endblock %}
